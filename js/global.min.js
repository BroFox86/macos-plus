"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(t,e,o){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=_superPropBase(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(o):i.value}})(t,e,o||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}function setDate(a,l){return function(t){var e,o,n=document.querySelector(t),i=n.getAttribute("datetime"),r=a(i);if(r<=2)return 0==r&&(n.innerHTML="Обновлено сегодня."),1==r&&(n.innerHTML="Обновлено вчера."),void(2==r&&(n.innerHTML="Обновлено позавчера."));switch(r<=6?o=l("days",e=r):r<=27?(e=Math.floor(r/7),o=l("weeks",e)):28<=r&&r<365?(e=r<30?1:Math.floor(r/30),o=l("months",e)):365<=r&&(e=Math.floor(r/365),o=l("years",e)),e){case 1:n.innerHTML="Обновлено ".concat(o," назад.");break;default:n.innerHTML="Обновлено ".concat(e," ").concat(o," назад.")}}}function calcDiff(t){var e=new Date,o=new Date(t);return Math.floor((e-o)/864e5)}function localizeUnits(t,e){switch(t){case"days":return 1==e?"день":e<=4?"дня":"дней";case"weeks":return 1==e?"неделю":"недели";case"months":return 1==e?"месяц":e<=4?"месяца":"месяцев";case"years":return 1==e?"год":e<=4?"года":"лет"}}window.Collapse=function(){},Collapse.prototype.listen=function(){document.addEventListener("click",this._initialize.bind(this))},Collapse.prototype._initialize=function(t){for(var e,o,n=t.target;;){if(!n)return;if(n.classList.contains("js-collapse-trigger"))return t.preventDefault(),o=n,e=document.querySelectorAll(o.getAttribute("data-target")),void this._handle(o,e);n=n.parentElement}},Collapse.prototype._handle=function(t,e){var o,n=this._getDuration(e[0]);if(!t.classList.contains("pending")){t.classList.add("pending"),setTimeout(function(){t.classList.remove("pending")},n);for(var i=0;i<e.length;i++)o=e[i],t.classList.contains("is-active")?this._slideUp(o):this._slideDown(o);t.classList.toggle("is-active")}},Collapse.prototype._slideDown=function(t){var e,o=t.style,n=this._getStyle(t,"padding-top"),i=this._getStyle(t,"padding-bottom"),r=this._getDuration(t);o.overflow="hidden",o.display="block",e=t.offsetHeight,o.transition="none",o.height="0",o.paddingTop="0",o.paddingBottom="0",setTimeout(function(){o.transition="",o.height=e+"px",o.paddingTop=n+"px",o.paddingBottom=i+"px",setTimeout(function(){o.overflow=""},r)},10)},Collapse.prototype._slideUp=function(t){var e=t.style,o=this._getDuration(t);e.overflow="hidden",e.height="0",e.paddingTop="0",e.paddingBottom="0",setTimeout(function(){t.removeAttribute("style")},o)},Collapse.prototype._getDuration=function(t){return 1e3*parseFloat(getComputedStyle(t).transitionDuration)},Collapse.prototype._getStyle=function(t,e){var o=getComputedStyle(t)[e];return parseFloat(o)},(new Collapse).listen();var setRelativeDate=setDate(calcDiff,localizeUnits);function handleLazyLoad(h){var y=document.querySelectorAll("[data-src]");function t(){var t=!0,e=!1,o=void 0;try{for(var n,i=y[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var r=n.value,a="loaded"==r.getAttribute("data-src");l(r)&&!a&&s(r)}}catch(t){e=!0,o=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw o}}}function l(t){var e=pageYOffset+document.documentElement.clientHeight;if(t.getBoundingClientRect().top+pageYOffset-document.documentElement.clientHeight<e)return!0}function s(t){var e=document.createElement("img"),o=t.getAttribute("data-src"),n=t.style;t.setAttribute("data-src","loaded"),e.setAttribute("src",o),e.onload=function(){n.transition="none",n.opacity=0,setTimeout(function(){n.transition="",n.opacity=1,t.setAttribute("src",o),t.removeAttribute("width"),t.removeAttribute("height")},20)}}window.addEventListener("DOMContentLoaded",function(){var t=!0,e=!1,o=void 0;try{for(var n,i=y[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var r=n.value,a=r.getAttribute("data-size"),l=[a.split("x")[0],a.split("x")[1]],s=l[0],c=l[1],u=s/c,d=h.width,f=void 0;window.matchMedia("(".concat(h.breakpoint,")")).matches?d=r.parentElement.offsetWidth:f=Math.floor(d/u);var p=[d,f];r.width=p[0],r.height=p[1]}}catch(t){e=!0,o=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw o}}}),window.addEventListener("DOMContentLoaded",t),window.addEventListener("scroll",t)}setRelativeDate(".js-date-modified"),function(){var e=document.querySelectorAll(".js-scrollspy-toggle"),a=document.querySelector(".js-scrollspy-target").querySelectorAll("li");function o(){var t=l();if(t){var e=!0,o=!1,n=void 0;try{for(var i,r=a[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.classList.remove("is-active")}}catch(t){o=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(o)throw n}}a[t.id-1].classList.add("is-active")}}["scroll","DOMContentLoaded"].forEach(function(t){window.addEventListener(t,o)});var n,i,l=function(){for(var t=e.length;t--;)if(r(e[t]))return(i=e[t])!=n&&(n=i)};function r(t){var e=pageYOffset;if(t.getBoundingClientRect().top+pageYOffset-300<e)return!0}}(),handleLazyLoad({width:530,breakpoint:"max-width: 600px"});var Modal=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"_open",value:function(){var t=this;this._togglePageScroll(),this._modal.style.display="block",setTimeout(function(){t._modal.classList.add("is-visible")},20)}},{key:"_close",value:function(){var t=this;this._modal.classList.remove("is-visible"),this._togglePageScroll(),setTimeout(function(){t._modal.style.display=""},this._duration)}},{key:"_togglePageScroll",value:function(){var t=document.body,e=window.innerWidth-document.documentElement.clientWidth;t.classList.contains("is-fixed")?(t.classList.remove("is-fixed"),t.style.paddingRight=""):(t.classList.add("is-fixed"),t.style.paddingRight="".concat(e,"px"))}},{key:"_getDuration",value:function(t){return 1e3*parseFloat(getComputedStyle(t).transitionDuration)}}]),t}(),Lightbox=function(t){function o(){var t;return _classCallCheck(this,o),(t=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this)))._modal=document.querySelector(".js-lightbox-toggle"),t._image=t._modal.querySelector("img"),t._duration=t._getDuration(t._modal),t}return _inherits(o,Modal),_createClass(o,[{key:"listen",value:function(){this._modal.querySelector(".js-lightbox-dismiss").addEventListener("click",this._close.bind(this)),document.addEventListener("click",this._open.bind(this))}},{key:"_open",value:function(t){for(var e=t.target;e!=document.body;){if(e.classList.contains("js-lightbox-trigger"))return t.preventDefault(),this._showImage(e),void _get(_getPrototypeOf(o.prototype),"_open",this).call(this);e=e.parentElement}}},{key:"_showImage",value:function(t){var e=this,o=t.getAttribute("href"),n=document.createElement("img");this._originSrc=this._image.src,n.src=o,n.onload=function(){e._image.src=o}}},{key:"_close",value:function(){_get(_getPrototypeOf(o.prototype),"_close",this).call(this),this._removeImage()}},{key:"_removeImage",value:function(){var t=this;setTimeout(function(){t._image.src=t._originSrc},this._duration)}}]),o}(),lightbox=new Lightbox;lightbox.listen(),function(){var e,o,n;document.addEventListener("mouseover",function(t){t.target.classList.contains("js-tooltip-trigger")&&(e=t.target,o=e.title,e.title="",(n=document.createElement("aside")).className="tooltip",'<button class="tooltip__close" type="button"></button>',n.innerHTML=o+'<button class="tooltip__close" type="button"></button>',document.body.appendChild(n))}),document.addEventListener("mousemove",function(t){t.target.classList.contains("js-tooltip-trigger")&&(n.style.left="".concat(t.pageX+20,"px"),n.style.top="".concat(t.pageY+10,"px"))}),document.addEventListener("mouseout",function(t){t.target.classList.contains("js-tooltip-trigger")&&(e.title=n.textContent,document.body.removeChild(n))})}();var SELECTORS='a[href^="http://"], a[href^="https://"]',links=document.querySelectorAll(SELECTORS),_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=links[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var link=_step4.value;link.target="_blank"}}catch(t){_didIteratorError4=!0,_iteratorError4=t}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}function setCustomList(t){var o=t.list,e=t.items,n=t.closing,i=document.createElement("style");document.head.appendChild(i),e.split("").forEach(function(t,e){i.sheet.insertRule("".concat(o," > li:nth-child( ").concat(e+1,' )::before {\n        content: "').concat(t).concat(n,'";\n      }'),0)})}function sharePage(l,s){document.body.addEventListener("click",function(t){for(var e,o,n,i,r,a=t.target;a!=document.body;){if(a.classList.contains("js-share-trigger")){t.preventDefault(),n=a,void 0,i="width=".concat(l),r="height=".concat(s),window.open((e=n,o=void 0,o=window.location.href.replace(/\#\d$/,""),e.href.replace(/[^=]*$/,o)),"","".concat(i,", ").concat(r));break}a=a.parentElement}})}setCustomList({list:"ol ol",items:"абвгдежзиклмнопрстуфхцчшщэюя",closing:")"}),sharePage(500,600);var Copy=function(t){function o(){var t;return _classCallCheck(this,o),(t=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this)))._trigger=document.querySelector(".js-copy-url-trigger"),t._field=document.querySelector(".js-copy-url-field"),t._wrapper=t._field.parentElement,t}return _inherits(o,Collapse),_createClass(o,[{key:"listen",value:function(){this._trigger.addEventListener("click",this._handle.bind(this))}},{key:"_handle",value:function(){var t=this,e=this._getDuration(this._wrapper);_get(_getPrototypeOf(o.prototype),"_handle",this).call(this,this._trigger,[this._wrapper]),setTimeout(function(){t._copyUrl(),setTimeout(function(){t._showMessage()},e)},e)}},{key:"_copyUrl",value:function(){this._field.value=window.location.href.replace(/\#\d$/i,""),this._field.focus(),this._field.select(),document.execCommand("Copy")}},{key:"_showMessage",value:function(){this._field.blur(),this._field.value="Ссылка скопирована!"}}]),o}(),copyUrl=new Copy;copyUrl.listen();var ScrollButton=function(){function e(t){_classCallCheck(this,e),this.button=document.querySelector(t.button),this.step=t.step||150}return _createClass(e,[{key:"listenButton",value:function(){this.button.onclick=this.scrollUp.bind(this)}},{key:"scrollUp",value:function(){var t,e=this;0!=document.documentElement.scrollTop||0!=document.body.scrollTop?(window.scrollBy(0,-this.step),t=setTimeout(function(){e.scrollUp()},20)):clearTimeout(t)}},{key:"handleVisibility",value:function(t){var e=this;window.addEventListener("scroll",function(){pageYOffset>t?e.button.classList.add("is-active"):e.button.classList.remove("is-active")})}}]),e}(),scrollButton=new ScrollButton({button:".js-scroll-button-toggle",step:300});scrollButton.listenButton(),scrollButton.handleVisibility(1.5*document.documentElement.clientHeight);