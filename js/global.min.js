function setDate(t,e){"use strict";return function(){var i=document.querySelector(arguments[0]);if(i){var o,n,s=i.getAttribute("datetime"),r=t(s);if(0!=r)if(1!=r)if(2!=r)switch(r<=6?n=e("days",o=r):r<=27?(o=Math.floor(r/7),n=e("weeks",o)):r>=28&&r<365?(o=r<30?1:Math.floor(r/30),n=e("months",o)):r>=365&&(o=Math.floor(r/365),n=e("years",o)),o){case 1:i.innerHTML="Обновлено "+n+" назад.";break;default:i.innerHTML="Обновлено "+o+" "+n+" назад."}else i.innerHTML="Обновлено позавчера.";else i.innerHTML="Обновлено вчера.";else i.innerHTML="Обновлено сегодня."}}}function calcDiff(t){var e=new Date,i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=new Date(t).setHours(0),n=Math.floor((i-o)/864e5);return n=n>=0?n:void 0}function localizeUnits(t,e){switch(t){case"days":return 1==e?"день":e<=4?"дня":"дней";case"weeks":return 1==e?"неделю":"недели";case"months":return 1==e?"месяц":e<=4?"месяца":"месяцев";case"years":return 1==e?"год":e<=4?"года":"лет"}}!function(){"use strict";window.Collapse=function(){},Collapse.prototype.listen=function(){document.addEventListener("click",this._initialize.bind(this))},Collapse.prototype._initialize=function(t){for(var e,i,o=t.target;;){if(!o)return;if(o.classList.contains("js-collapse-trigger"))return t.preventDefault(),i=o,e=document.querySelectorAll(i.getAttribute("data-target")),void this._handle(i,e);o=o.parentElement}},Collapse.prototype._handle=function(t,e){var i,o=this._getDuration(e[0]);if(!t.classList.contains("pending")){t.classList.add("pending"),setTimeout(function(){t.classList.remove("pending")},o);for(var n=0;n<e.length;n++)i=e[n],t.classList.contains("is-active")?this._slideUp(i):this._slideDown(i);t.classList.toggle("is-active")}},Collapse.prototype._slideDown=function(t){var e,i=t.style,o=this._getStyle(t,"padding-top"),n=this._getStyle(t,"padding-bottom"),s=this._getDuration(t);i.overflow="hidden",i.display="block",e=t.offsetHeight,i.transition="none",i.height="0",i.paddingTop="0",i.paddingBottom="0",setTimeout(function(){i.transition="",i.height=e+"px",i.paddingTop=o+"px",i.paddingBottom=n+"px",setTimeout(function(){i.overflow=""},s)},10)},Collapse.prototype._slideUp=function(t){var e=t.style,i=this._getDuration(t);e.overflow="hidden",e.height="0",e.paddingTop="0",e.paddingBottom="0",setTimeout(function(){t.removeAttribute("style")},i)},Collapse.prototype._getDuration=function(t){return 1e3*parseFloat(getComputedStyle(t).transitionDuration)},Collapse.prototype._getStyle=function(t,e){var i=getComputedStyle(t)[e];return parseFloat(i)},(new Collapse).listen()}();var relativeDate=setDate(calcDiff,localizeUnits);function ScrollSpy(t){"use strict";var e=document.querySelector(".js-scrollspy-target").querySelectorAll("li"),i=document.querySelectorAll(".js-scrollspy-toggle");function o(){var t,i=r();i&&(!function(){for(var t=0;t<e.length;t++)e[t].classList.remove("is-active")}(),t=i.id,e[t-1].classList.add("is-active"))}t=t||0;var n,s,r=function(){for(var t=i.length;t--;)if(l(i[t])){s=i[t];break}return s!=n&&(n=s,s)};function l(e){if(pageYOffset>e.getBoundingClientRect().top+pageYOffset-t)return!0}["scroll","DOMContentLoaded"].forEach(function(t){window.addEventListener(t,o)})}relativeDate(".js-date-modified");var contents=new ScrollSpy(300);function handleImageLoading(t){"use strict";var e=document.querySelectorAll("[data-src]"),i=window.navigator.userAgent;function o(){for(var t,i=0;i<e.length;i++)!("loaded"==(t=e[i]).getAttribute("data-src"))&&s(t)&&n(t)}function n(t){var e=document.createElement("img"),i=t.getAttribute("data-src"),o=t.style;t.setAttribute("data-src","loaded"),e.setAttribute("src",i),e.onload=function(){o.transition="none",o.opacity=0,setTimeout(function(){o.transition="",o.opacity=1,t.setAttribute("src",i)},20)},t.onload=function(){this.removeAttribute("width"),this.removeAttribute("height")}}function s(t){if(pageYOffset+document.documentElement.clientHeight>t.getBoundingClientRect().top+pageYOffset-document.documentElement.clientHeight)return!0}i.match("Trident")&&i.match("Edge")&&function(){for(var t,i,o=0;o<e.length;o++)t=e[o],i=t.getAttribute("src").replace(/(\.[\w\d]+)$/,".gif"),t.setAttribute("src",i)}(),setTimeout(function(){for(var i=0;i<e.length;i++){var o,n=e[i],s=n.getAttribute("data-size"),r=s.search(/[xX,\/-]/),l=s.slice(0,r)/s.slice(r+1),a=t.width;window.matchMedia(t.fullWidth).matches&&(a=n.parentElement.offsetWidth),o=Math.floor(a/l),n.setAttribute("width",a),n.setAttribute("height",o)}},500),["DOMContentLoaded","scroll"].forEach(function(t){window.addEventListener(t,o)})}handleImageLoading({width:530,fullWidth:"(max-width: 600px)"}),function(){"use strict";window.Modal=function(){},Modal.prototype._open=function(){var t=this._modal;this._toggleScroll(),t.style.display="block",setTimeout(function(){t.classList.add("is-visible")}.bind(this),20)},Modal.prototype._close=function(){var t=this._modal,e=this._duration;t.classList.remove("is-visible"),this._toggleScroll(),setTimeout(function(){t.style.display=""}.bind(this),e)},Modal.prototype._toggleScroll=function(){var t=document.body,e=window.innerWidth-document.documentElement.clientWidth;t.classList.contains("is-fixed")?(t.style.paddingRight="",t.classList.remove("is-fixed")):(t.style.paddingRight=e+"px",t.classList.add("is-fixed"))},Modal.prototype._getDuration=function(t){return 1e3*parseFloat(getComputedStyle(t).transitionDuration)}}();class Lightbox extends Modal{constructor(){super(),this._modal=document.querySelector(".js-lightbox-toggle"),this._image=this._modal.querySelector("img"),this._duration=this._getDuration(this._modal)}listen(){this._modal.querySelector(".js-lightbox-dismiss").addEventListener("click",this._close.bind(this)),document.addEventListener("click",this._open.bind(this))}_open(t){let e=t.target;for(;e!=document.body;){if(e.classList.contains("js-lightbox-trigger"))return t.preventDefault(),this._showImage(e),void super._open();e=e.parentElement}}_showImage(t){const e=t.getAttribute("href"),i=document.createElement("img");this._originSrc=this._image.src,i.src=e,i.onload=(()=>{this._image.src=e})}_close(){super._close(),this._removeImage()}_removeImage(){setTimeout(()=>{this._image.src=this._originSrc},this._duration)}}const lightbox=new Lightbox;function Tooltip(){"use strict";var t,e,i,o=document.querySelector(".js-tooltip-body");function n(n){if((t=n.target).classList.contains("js-tooltip-trigger"))return o.classList.contains("is-active")?(o.classList.remove("is-active"),t.title=i.innerText,void o.removeChild(i)):(e=t.title,t.title="",(i=document.createElement("div")).innerText=e,o.appendChild(i),void o.classList.add("is-active"))}document.addEventListener("mouseover",n),document.addEventListener("mouseout",n),document.addEventListener("mousemove",function(t){o.classList.contains("is-active")&&(o.style.left=t.pageX+20+"px",o.style.top=t.pageY+10+"px")})}lightbox.listen();var tooltip=new Tooltip;{const t='a[href^="http://"], a[href^="https://"]',e=document.querySelectorAll(t);for(let t of e)t.target="_blank"}function setCustomList(t){"use strict";var e=t.items,i=t.list,o=t.closing,n=document.createElement("style");document.head.appendChild(n),e.split("").forEach(function(t,e){n.sheet.insertRule(i+"> li:nth-child("+(e+1)+")::before {content:'"+t+o+"'}",0)})}function Share(t,e){"use strict";document.body.addEventListener("click",function(i){for(var o,n,s,r=i.target;r!=document.body;){if(r.classList.contains("js-share-trigger")){i.preventDefault(),o=r,n=void 0,s=void 0,n="width="+t,s="height="+e,window.open(function(t){var e=window.location.href.replace(/\#\d$/i,"");return t.href.replace(/[^=]*$/,e)}(o),"",n+","+s);break}r=r.parentElement}})}setCustomList({list:"ol ol",items:"абвгдежзиклмнопрстуфхцчшщэюя",closing:")"});var share=new Share(500,600);!function(){"use strict";function t(){this._trigger=document.querySelector(".js-copy-url-trigger"),this._field=document.querySelector(".js-copy-url-field"),this._wrapper=this._field.parentElement}t.prototype=Object.create(Collapse.prototype),t.prototype.constructor=t,t.prototype._handle=function(){var t=this._getDuration(this._wrapper);Collapse.prototype._handle.call(this,this._trigger,[this._wrapper]),setTimeout(function(){this._copyUrl(),setTimeout(function(){this._showMessage()}.bind(this),t)}.bind(this),t)},t.prototype._copyUrl=function(){this._field.value=window.location.href.replace(/\#\d$/i,""),this._field.focus(),this._field.select(),document.execCommand("Copy")},t.prototype._showMessage=function(){this._field.blur(),this._field.value="Ссылка скопирована!"},t.prototype.listen=function(){this._trigger.addEventListener("click",this._handle.bind(this))},(new t).listen()}();class ScrollButton{constructor(t){this.button=document.querySelector(t.button),this.step=t.step||150}listenButton(){this.button.onclick=this.scrollUp.bind(this)}scrollUp(){let t;0!=document.documentElement.scrollTop||0!=document.body.scrollTop?(window.scrollBy(0,-this.step),t=setTimeout(()=>{this.scrollUp()},20)):clearTimeout(t)}handleVisibility(t){window.addEventListener("scroll",()=>{pageYOffset>t?this.button.classList.add("is-active"):this.button.classList.remove("is-active")})}}const scrollButton=new ScrollButton({button:".js-scroll-button-toggle",step:300});scrollButton.listenButton(),scrollButton.handleVisibility(1.5*document.documentElement.clientHeight);