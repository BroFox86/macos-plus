"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _get(t,e,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=_superPropBase(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(o){return function(){var t,e=_getPrototypeOf(o);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var n=_getPrototypeOf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Collapse=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"listen",value:function(){var o=this;document.addEventListener("click",function(t){var e,n;t.target&&t.target.matches(".js-collapse-trigger")&&(t.preventDefault(),e=t.target,n=document.querySelectorAll(e.dataset.target),o._handle(e,n))})}},{key:"_handle",value:function(t,e){if(!t.matches(".pending")){t.classList.add("pending"),setTimeout(function(){t.classList.remove("pending")},this._getDuration(e[0]));var n=!0,o=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;t.matches(".is-active")?this._slideUp(s):this._slideDown(s)}}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}t.classList.toggle("is-active")}}},{key:"_slideDown",value:function(t){var e,n=t.style,o=this._getStyle(t,"padding-top"),i=this._getStyle(t,"padding-bottom"),r=this._getDuration(t);n.overflow="hidden",n.display="block",e=t.offsetHeight,n.transition="none",n.height=n.paddingTop=n.paddingBottom=0,setTimeout(function(){n.transition="",n.height="".concat(e,"px"),n.paddingTop="".concat(o,"px"),n.paddingBottom="".concat(i,"px"),setTimeout(function(){n.overflow=""},r)},20)}},{key:"_slideUp",value:function(t){var e=t.style;e.overflow="hidden",e.height=e.paddingTop=e.paddingBottom=0,setTimeout(function(){t.removeAttribute("style")},this._getDuration(t))}},{key:"_getStyle",value:function(t,e){return parseFloat(getComputedStyle(t)[e])}},{key:"_getDuration",value:function(t){return 1e3*parseFloat(getComputedStyle(t).transitionDuration)}}]),t}(),collapse=new Collapse;function setDate(a,s){return function(t){var e=document.querySelector(t);if(e){var n,o,i=e.getAttribute("datetime"),r=a(i);if(r<=2)return r<0&&(e.innerHTML="Только что обновлено."),0==r&&(e.innerHTML="Обновлено сегодня."),1==r&&(e.innerHTML="Обновлено вчера."),void(2==r&&(e.innerHTML="Обновлено позавчера."));switch(r<=6?o=s("days",n=r):r<=27?(n=Math.floor(r/7),o=s("weeks",n)):28<=r&&r<365?(n=r<30?1:Math.floor(r/30),o=s("months",n)):365<=r&&(n=Math.floor(r/365),o=s("years",n)),n){case 1:e.innerHTML="Обновлено ".concat(o," назад.");break;default:e.innerHTML="Обновлено ".concat(n," ").concat(o," назад.")}}}}function calcDiff(t){var e=new Date,n=new Date(t);return Math.floor((e-n)/864e5)}function localizeUnits(t,e){switch(t){case"days":return 1==e?"день":e<=4?"дня":"дней";case"weeks":return 1==e?"неделю":"недели";case"months":return 1==e?"месяц":e<=4?"месяца":"месяцев";case"years":return 1==e?"год":e<=4?"года":"лет"}}collapse.listen();var setRelativeDate=setDate(calcDiff,localizeUnits);function handleLoadImages(t){var h=t.actualWidth,p=t.breakpoint,_=document.querySelectorAll("[data-src]");function e(){var t=!0,e=!1,n=void 0;try{for(var o,i=_[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value;!("loaded"==r.dataset.src)&&a(r)&&s(r)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}function a(t){var e=pageYOffset+document.documentElement.clientHeight;if(t.getBoundingClientRect().top+pageYOffset-document.documentElement.clientHeight<e)return!0}function s(t){var e=document.createElement("img"),n=t.dataset.src,o=t.style;t.dataset.src="loaded",e.setAttribute("src",n),e.onload=function(){o.transition="none",o.opacity=0,setTimeout(function(){o.transition="",o.opacity=1,t.setAttribute("src",n),t.removeAttribute("width"),t.removeAttribute("height")},20)}}window.addEventListener("DOMContentLoaded",function(){var t=!0,e=!1,n=void 0;try{for(var o,i=_[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value,a=r.dataset.size,s=[a.split("x")[0],a.split("x")[1]],l=s[0],c=s[1],u=l/c;window.matchMedia("(".concat(p,")")).matches&&(h=r.parentElement.offsetWidth);var d=Math.floor(h/u),f=[h,d];r.width=f[0],r.height=f[1]}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}),window.addEventListener("DOMContentLoaded",e),window.addEventListener("scroll",e)}setRelativeDate(".js-date-modified"),function(){var e=document.querySelectorAll(".js-scrollspy-toggle"),a=document.querySelector(".js-scrollspy-target").querySelectorAll("li");function n(){var t=s();if(t){var e=!0,n=!1,o=void 0;try{for(var i,r=a[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.classList.remove("is-active")}}catch(t){n=!0,o=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw o}}a[t.id-1].classList.add("is-active")}}["scroll","DOMContentLoaded"].forEach(function(t){window.addEventListener(t,n)});var o,i,s=function(){for(var t=e.length;t--;)if(r(e[t]))return(i=e[t])!=o&&(o=i)};function r(t){var e=pageYOffset;if(t.getBoundingClientRect().top+pageYOffset-300<e)return!0}}(),handleLoadImages({actualWidth:530,breakpoint:"max-width: 600px"});var Modal=function(){function e(t){_classCallCheck(this,e),this._modal=document.querySelector(t),this._pressed=new Set,this._lastFocus=null,this._listenFocusIn=null,this._listenKeydown=null,this._listenClearPressed=null,this._modal&&(this._container=this._modal.querySelector(".modal__container"))}return _createClass(e,[{key:"open",value:function(){var t=this;this._lastFocus=document.activeElement,this._modal.hidden=!1,this._modal.setAttribute("aria-modal",!0),togglePageScroll(),this._listenFocusIn=this._handleFocusIn(this._container).bind(this),this._listenKeydown=this._handleKeyDown.bind(this),this._listenClearPressed=this._clearPressed.bind(this),document.addEventListener("focusin",this._listenFocusIn),document.addEventListener("keydown",this._listenKeydown),document.addEventListener("keyup",this._listenClearPressed),setTimeout(function(){t._modal.classList.add("is-visible")},20)}},{key:"close",value:function(){var t=this,e=this._getDuration(this._container);this._modal.classList.remove("is-visible"),document.removeEventListener("focusin",this._listenFocusIn),document.removeEventListener("keydown",this._listenKeydown),document.removeEventListener("keyup",this._listenClearPressed),setTimeout(function(){togglePageScroll(),t._modal.hidden=!0,t._modal.removeAttribute("aria-modal"),t._lastFocus.focus()},e)}},{key:"_handleFocusIn",value:function(s){var l=this;return function(t){var e=t.target,n=t.relatedTarget,o=l._pressed,i=getFocusElements(s),r=i[0],a=i[i.length-1];return o.has("Shift")&&n===r?a.focus():o.has("Shift")||n!==a?void(s.contains(e)||(o.has("Shift")?a.focus():r.focus())):r.focus()}}},{key:"_handleKeyDown",value:function(t){var e=t.key;"Escape"===e?this.close():this._pressed.add(e)}},{key:"_clearPressed",value:function(t){var e=t.key;this._pressed.delete(e)}},{key:"_getDuration",value:function(t){return 1e3*parseFloat(getComputedStyle(t).transitionDuration)}}]),e}();function togglePageScroll(){var t="is-fixed-by-modal",e=document.body,n=window.innerWidth-document.documentElement.clientWidth;e.classList.contains(t)?(e.classList.remove(t),e.style.paddingRight=""):(e.classList.add(t),e.style.paddingRight="".concat(n,"px"))}function getFocusElements(t){return t.querySelectorAll("a,\n     button:not(:disabled),\n     input:not(:disabled),\n     textarea:not(:disabled),\n     select:not(:disabled),\n     *[tabindex]:not(:disabled)")}var Lightbox=function(t){_inherits(n,Modal);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this))._modal=document.querySelector(".js-lightbox-toggle"),t._container=t._modal,t._image=t._modal.querySelector("img"),t._duration=t._getDuration(t._modal),t}return _createClass(n,[{key:"listen",value:function(){this._modal.querySelector(".js-lightbox-dismiss").addEventListener("click",this._close.bind(this)),document.addEventListener("click",this._open.bind(this))}},{key:"_open",value:function(t){for(var e=t.target;e!=document.body;){if(e.classList.contains("js-lightbox-trigger"))return t.preventDefault(),this._showImage(e),void _get(_getPrototypeOf(n.prototype),"open",this).call(this);e=e.parentElement}}},{key:"_showImage",value:function(t){var e=this,n=t.getAttribute("href"),o=document.createElement("img");this._originSrc=this._image.src,o.src=n,o.onload=function(){e._image.src=n}}},{key:"_close",value:function(){_get(_getPrototypeOf(n.prototype),"close",this).call(this),this._removeImage()}},{key:"_removeImage",value:function(){var t=this;setTimeout(function(){t._image.src=t._originSrc},this._duration)}}]),n}(),lightbox=new Lightbox;lightbox.listen(),function(){var e,n,o;document.addEventListener("mouseover",function(t){t.target.classList.contains("js-tooltip-trigger")&&(e=t.target,n=e.title,e.title="",(o=document.createElement("aside")).className="tooltip",o.setAttribute("role","tooltip"),'<button class="tooltip__close" type="button"></button>',o.innerHTML=n+'<button class="tooltip__close" type="button"></button>',document.body.append(o))}),document.addEventListener("mousemove",function(t){t.target.classList.contains("js-tooltip-trigger")&&(o.style.left="".concat(t.pageX+20,"px"),o.style.top="".concat(t.pageY+10,"px"))}),document.addEventListener("mouseout",function(t){t.target.classList.contains("js-tooltip-trigger")&&(e.title=o.textContent,document.body.removeChild(o))})}();var SELECTORS='a[href^="http://"], a[href^="https://"]',links=document.querySelectorAll(SELECTORS),_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=links[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var link=_step5.value;link.target="_blank"}}catch(t){_didIteratorError5=!0,_iteratorError5=t}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}function setCustomList(t){var n=t.selector,e=t.items,o=t.closing,i=document.createElement("style");document.head.append(i),e.split("").forEach(function(t,e){i.sheet.insertRule("".concat(n," > li:nth-child( ").concat(e+1,' )::before {\n        content: "').concat(t).concat(o,'";\n      }'),0)})}function sharePage(s,l){document.body.addEventListener("click",function(t){for(var e,n,o,i,r,a=t.target;a!=document.body;){if(a.classList.contains("js-share-trigger")){t.preventDefault(),o=a,void 0,i="width=".concat(s),r="height=".concat(l),window.open((e=o,n=void 0,n=window.location.href.replace(/\#\d$/,""),e.href.replace(/[^=]*$/,n)),"","".concat(i,", ").concat(r));break}a=a.parentElement}})}setCustomList({selector:"ol ol",items:"абвгдежзиклмнопрстуфхцчшщэюя",closing:")"}),sharePage(500,600);var Copy=function(t){_inherits(n,Collapse);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this))._trigger=document.querySelector(".js-copy-url-trigger"),t._field=document.querySelector(".js-copy-url-field"),t._wrapper=t._field.parentElement,t}return _createClass(n,[{key:"listen",value:function(){this._trigger.addEventListener("click",this._handle.bind(this))}},{key:"_handle",value:function(){var t=this,e=this._getDuration(this._wrapper);_get(_getPrototypeOf(n.prototype),"_handle",this).call(this,this._trigger,[this._wrapper]),setTimeout(function(){t._copyUrl(),setTimeout(function(){t._showMessage()},e)},e)}},{key:"_copyUrl",value:function(){this._field.value=window.location.href.replace(/\#\d$/i,""),this._field.focus(),this._field.select(),document.execCommand("Copy")}},{key:"_showMessage",value:function(){this._field.blur(),this._field.value="Ссылка скопирована!"}}]),n}(),copyUrl=new Copy;copyUrl.listen();var ScrollButton=function(){function e(t){_classCallCheck(this,e),this._button=document.querySelector(t.button),this._step=t.step||150}return _createClass(e,[{key:"listenButton",value:function(){this._button.onclick=this.scrollUp.bind(this)}},{key:"scrollUp",value:function(){var t,e=this;0!=document.documentElement.scrollTop||0!=document.body.scrollTop?(window.scrollBy(0,-this._step),t=setTimeout(function(){e.scrollUp()},20)):clearTimeout(t)}},{key:"handleVisibility",value:function(t){var e=this;window.addEventListener("scroll",function(){pageYOffset>t?e._button.classList.add("is-active"):e._button.classList.remove("is-active")})}}]),e}(),scrollButton=new ScrollButton({button:".js-scroll-button-toggle",step:300});scrollButton.listenButton(),scrollButton.handleVisibility(1.5*document.documentElement.clientHeight);