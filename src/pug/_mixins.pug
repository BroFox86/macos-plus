-// Header mixin ///////////////////////////////////////////////////////////////

- var headerId = 0

mixin h2
  h2.article__h2(id = (headerId + 1))
    a.article__anchor.link.link--anchor(href= "#" + (headerId + 1)) #
    | #{itemList[headerId++]}

-///////////////////////////////////////////////////////////////////////////////

mixin h3
  h3.article__h3
    if block
    block

mixin p
  p.article__par
    if block
    block

mixin ol
  ol.article__numbered-list(start= attributes.start)
    if block
    block

mixin ul
  ul.article__marked-list
    if block
    block

mixin markedItem
  li.article__marked-item
    if block
    block

mixin link(href, text)
  a.link.link--article(href= href )!= text

mixin noteLink(href, text)
  a.link.link--note(href= href )!= text

mixin svg(className, id)
  svg(class= className width= "30")
    use(xlink:href="#" + id)

mixin tooltip(title, text)
  span.article__tooltip(title!= title)= text

mixin code(string)
  code.article__code= string

mixin key(key)
  kbd.article__key= key

-// Image mixin ///////////////////////////////////////////////////////////////

- var small = ""

mixin img(width)
  - original = src.replace(/(\.[\w\d_-]+)$/i, "_original$1")

  case width
    default
      a.article__img-wrapper(href= original)
        div
          img.article__img(
            src = src
            alt = alt)
    when small
      div.article__img-wrapper
        img.article__img(
          src = src
          alt = alt)

mixin figure(width)
  - original = src.replace(/(\.[\w\d_-]+)$/i, "_original$1")

  case width
    default
      figure.article__figure
        a.article__img-wrapper(href= original)
          img.article__img.article__img--figure(
            src = src
            alt = alt)
        figcaption.article__figcaption
          if block
          block
    when small
      figure.article__figure
        img.article__img.article__img--figure(
          src = src
          alt = alt)
        figcaption.article__figcaption
          if block
          block
          
-///////////////////////////////////////////////////////////////////////////////

mixin respImg
  - var src1 = src + " " + size + "w"
  - var src2 = src.replace(/(\.[\w\d_-]+)$/i, "@large$1") + " " + size * 1.5 + "w"
  - var src3 = src.replace(/(\.[\w\d_-]+)$/i, "@huge$1") + " " + size * 2 + "w"

  img(class  = imgClass
    srcset = src1 + ", " + src2 + ", " + src3
    sizes  = sizes
    src	   = src
    alt	   = alt)

mixin imgSourceTag
  - var src1 = src + " " + size + "w"
  - var src2 = src.replace(/(\.[\w\d_-]+)$/i, "@large$1") + " " + size * 1.5 + "w"
  - var src3 = src.replace(/(\.[\w\d_-]+)$/i, "@huge$1") + " " + size * 2 + "w"

  source(
    media  = media
    srcset = src1 + ", " + src2 + ", " + src3
    sizes  = sizes)