doctype html
include /pug/_mixins
include /pug/_vars
include /blocks/**/*

block page
  head
    block head
      meta(charset="utf-8")
      title= pageTitle
      meta(name="description" content= pageDesc)
      
      // inject:critical:css 
      // endinject

      // build:css css/styles.min.css rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" 
      link(href="css/normalize.css" rel="stylesheet")
      link(href="css/main.css" rel="stylesheet")
      // endbuild 

      // inject:fg-loadcss:html 
      // endinject 
      
      // inject-string:noscript

      meta(content="width=device-width, initial-scale=1" name="viewport")

      meta(property="og:title" content= pageTitle)
      meta(property="og:description" content= pageDesc)
      meta(property="og:type" content="article")
      meta(property="og:image" content= domainName + metaImage.src)
      meta(property="og:image:width" content= metaImage.width)
      meta(property="og:image:height" content= metaImage.height)
      meta(property="og:url" content= domainName)
      meta(property="og:site_name" content="macOS+ | Лис подскажет")

      link(rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png")
      link(rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png")
      link(rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png")
      link(rel="manifest" href="manifest.json")
      link(rel="shortcut icon" href="images/favicon.ico")
      meta(name="apple-mobile-web-app-title" content="macOS+ | Лис подскажет")
      meta(name="application-name" content="macOS+ | Лис подскажет")
      meta(name="msapplication-config" content="browserconfig.xml")
      meta(name="theme-color" content="#4367d4")

      //- Google Tag BEGIN
      script(async src="https://www.googletagmanager.com/gtag/js?id=UA-100340915-1")
      script.
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-100340915-1');
      //- Google Tag END

  body.page(lang="ru")

    <!--[if lte IE 9]>
    <p class="page__outdated">Вы используете <strong>устаревший</strong> браузер. Пожалуйста, <a href="http://browsehappy.com/">обновите свой браузер</a>, чтобы улучшить отображение сайта.</p>
    <![endif]-->
    
    // inject:svg 
    // endinject

    +header
      block menu
        +menu

    div.page__container
      block containerInner
        article.page__article.article
          block articleHeader
            +articleHeader

          block pageNav
            case hasPageNav
              default
                - var isMobile = true
                +pageNav
              when false
                //- This comment mean empty block

          block content
          +vote

      block sidebar
        - var isMobile = false
        +sidebar
    
    +footer
    +scrollButton
    +lightbox

    block scripts
      script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js")

      // build:js js/main.min.js defer
      script(src="js/stickyfill.js")
      script(src="js/moment.min.js")
      script(src="js/ru.js")
      script(src="js/scripts.js")
      // endbuild 

      //- LikeBtn
      script.
        (function(d,e,s){if(d.getElementById("likebtn_wjs"))return;a=d.createElement(e);m=d.getElementsByTagName(e)[0];a.async=1;a.id="likebtn_wjs";a.src=s;m.parentNode.insertBefore(a, m)})(document,"script","https://w.likebtn.com/js/w/widget.js");

      // build:remove 
      script(src="js/_display-viewport-size.js")
      // endbuild 

    block structuredData
      mixin structuredData
        mixin structuredDataMarkup
          script(type="application/ld+json"). 
            {
            "@context": "http://schema.org",
            "@type": "TechArticle",
            "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "#{domainName}#{pageLink}"
            },
            "headline": "#{pageTitle}",
            "image": "#{domainName}#{metaImage.src}",
            "datePublished": "#{datePublished[2]}-#{datePublished[1]}-#{datePublished[0]}",
            "dateModified": "#{dateModifiedString}",
            "author": {
              "@type": "Person",
              "name": "Daur Gamisonia",
              "alternateName": "BroFox",
              "email": "daurgam@gmail.com",
              "url": [
                        "https://vk.com/id335661231",
                        "https://plus.google.com/+DaurGamisoniya",
                        "http://steamcommunity.com/id/daurfox/"
                      ]
            },
            "publisher": {
              "@type": "Organization",
              "name": "macOS Plus",
              "logo": {
                "@type": "ImageObject",
                "url": "#{domainName}images/logo.jpg"
              }
            },
            "description": "#{pageDesc}"
            }

        case isDateModified
          default
            - var dateModifiedString = ""
            +structuredDataMarkup

          when true
            - var dateModifiedString = dateModified[2] + "-" + dateModified[1] + "-" + dateModified[0]
            +structuredDataMarkup

      +structuredData